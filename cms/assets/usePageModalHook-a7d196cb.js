import{a7 as W,f as G,a as ne,ad as Q,aq as ve,ab as ye,ac as ge,e as J,h as x,j as be,k as he,_ as re,ar as Ce,a5 as Ee,u as ke,a9 as _e,m as ee,w as we}from"./base-fea03ce8.js";import{u as oe,E as Me}from"./el-button-a5400fd7.js";import{E as Se,a as Ie}from"./el-form-item-5acb0a27.js";import{U as ue,E as De}from"./el-input-9d919cf6.js";import{g as Fe,u as Te,E as Ae,b as Be}from"./page-content-023146c0.js";import{u as Oe}from"./el-scrollbar-fb408054.js";import{F as $e,e as Pe}from"./el-tooltip-ea3857ca.js";import{u as Le}from"./main-dbe8f02a.js";import{q as Ve,v as ze,o as Ne,E as Re}from"./index-1cfa6bc8.js";import{V as de,a4 as Ue,aq as Ye,af as K,aF as je,L as Z,a7 as He,ab as H,d as U,a as I,P as w,h as Xe,O as te,N as R,o as b,c as V,R as Y,S as F,u as o,T as qe,w as h,W as z,Z as We,Y as j,X as ie,M as _,a2 as xe,I as Ke,aj as Ze,a3 as Ge,Q as Je,ac as Qe,at as eo,ay as oo,a1 as to,al as le,F as X,au as se,_ as lo}from"./_plugin-vue_export-helper-33f8d7e1.js";import{P as q}from"./vnode-7cc962c9.js";import{c as so}from"./refs-bfa8f37a.js";import{u as ae}from"./index-7842665d.js";import{t as ao}from"./error-78e43d3e.js";const ce=Symbol("dialogInjectionKey"),no=(e,l,a)=>{let n={offsetX:0,offsetY:0};const t=r=>{const m=r.clientX,y=r.clientY,{offsetX:v,offsetY:i}=n,s=e.value.getBoundingClientRect(),p=s.left,M=s.top,T=s.width,A=s.height,B=document.documentElement.clientWidth,S=document.documentElement.clientHeight,O=-p+v,d=-M+i,g=B-p-T+v,$=S-M-A+i,N=D=>{const f=Math.min(Math.max(v+D.clientX-m,O),g),k=Math.min(Math.max(i+D.clientY-y,d),$);n={offsetX:f,offsetY:k},e.value.style.transform=`translate(${W(f)}, ${W(k)})`},C=()=>{document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",C)};document.addEventListener("mousemove",N),document.addEventListener("mouseup",C)},u=()=>{l.value&&e.value&&l.value.addEventListener("mousedown",t)},c=()=>{l.value&&e.value&&l.value.removeEventListener("mousedown",t)};de(()=>{Ue(()=>{a.value?u():c()})}),Ye(()=>{c()})},ro=e=>{K(e)||ao("[useLockscreen]","You need to pass a ref param to this function");const l=G("popup"),a=je(()=>l.bm("parent","hidden"));if(!ne||Q(document.body,a.value))return;let n=0,t=!1,u="0";const c=()=>{setTimeout(()=>{ge(document.body,a.value),t&&(document.body.style.width=u)},200)};Z(e,r=>{if(!r){c();return}t=!Q(document.body,a.value),t&&(u=document.body.style.width),n=Fe(l.namespace.value);const m=document.documentElement.clientHeight<document.body.scrollHeight,y=ve(document.body,"overflowY");n>0&&(m||y==="scroll")&&t&&(document.body.style.width=`calc(100% - ${n}px)`),ye(document.body,a.value)}),He(()=>c())},fe=e=>{if(!e)return{onClick:H,onMousedown:H,onMouseup:H};let l=!1,a=!1;return{onClick:c=>{l&&a&&e(c),l=a=!1},onMousedown:c=>{l=c.target===c.currentTarget},onMouseup:c=>{a=c.target===c.currentTarget}}},uo=J({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:x([String,Array,Object])},zIndex:{type:x([String,Number])}}),io={click:e=>e instanceof MouseEvent};var co=U({name:"ElOverlay",props:uo,emits:io,setup(e,{slots:l,emit:a}){const n=G("overlay"),t=m=>{a("click",m)},{onClick:u,onMousedown:c,onMouseup:r}=fe(e.customMaskEvent?void 0:t);return()=>e.mask?I("div",{class:[n.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:u,onMousedown:c,onMouseup:r},[w(l,"default")],q.STYLE|q.CLASS|q.PROPS,["onClick","onMouseup","onMousedown"]):Xe("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[w(l,"default")])}});const fo=co,me=J({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:be},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),mo={close:()=>!0},po=["aria-label"],vo=["id"],yo=U({name:"ElDialogContent"}),go=U({...yo,props:me,emits:mo,setup(e){const l=e,{t:a}=Oe(),{Close:n}=Ce,{dialogRef:t,headerRef:u,bodyId:c,ns:r,style:m}=te(ce),{focusTrapRef:y}=te($e),v=so(y,t),i=R(()=>l.draggable);return no(t,u,i),(s,p)=>(b(),V("div",{ref:o(v),class:F([o(r).b(),o(r).is("fullscreen",s.fullscreen),o(r).is("draggable",o(i)),o(r).is("align-center",s.alignCenter),{[o(r).m("center")]:s.center},s.customClass]),style:ie(o(m)),tabindex:"-1"},[Y("header",{ref_key:"headerRef",ref:u,class:F(o(r).e("header"))},[w(s.$slots,"header",{},()=>[Y("span",{role:"heading",class:F(o(r).e("title"))},qe(s.title),3)]),s.showClose?(b(),V("button",{key:0,"aria-label":o(a)("el.dialog.close"),class:F(o(r).e("headerbtn")),type:"button",onClick:p[0]||(p[0]=M=>s.$emit("close"))},[I(o(he),{class:F(o(r).e("close"))},{default:h(()=>[(b(),z(We(s.closeIcon||o(n))))]),_:1},8,["class"])],10,po)):j("v-if",!0)],2),Y("div",{id:o(c),class:F(o(r).e("body"))},[w(s.$slots,"default")],10,vo),s.$slots.footer?(b(),V("footer",{key:0,class:F(o(r).e("footer"))},[w(s.$slots,"footer")],2)):j("v-if",!0)],6))}});var bo=re(go,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const ho=J({...me,appendToBody:{type:Boolean,default:!1},beforeClose:{type:x(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),Co={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ue]:e=>Ee(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Eo=(e,l)=>{const n=Ke().emit,{nextZIndex:t}=Ve();let u="";const c=ae(),r=ae(),m=_(!1),y=_(!1),v=_(!1),i=_(e.zIndex||t());let s,p;const M=ke("namespace",_e),T=R(()=>{const E={},L=`--${M.value}-dialog`;return e.fullscreen||(e.top&&(E[`${L}-margin-top`]=e.top),e.width&&(E[`${L}-width`]=W(e.width))),E}),A=R(()=>e.alignCenter?{display:"flex"}:{});function B(){n("opened")}function S(){n("closed"),n(ue,!1),e.destroyOnClose&&(v.value=!1)}function O(){n("close")}function d(){p==null||p(),s==null||s(),e.openDelay&&e.openDelay>0?{stop:s}=ee(()=>C(),e.openDelay):C()}function g(){s==null||s(),p==null||p(),e.closeDelay&&e.closeDelay>0?{stop:p}=ee(()=>D(),e.closeDelay):D()}function $(){function E(L){L||(y.value=!0,m.value=!1)}e.beforeClose?e.beforeClose(E):g()}function N(){e.closeOnClickModal&&$()}function C(){ne&&(m.value=!0)}function D(){m.value=!1}function f(){n("openAutoFocus")}function k(){n("closeAutoFocus")}function P(E){var L;((L=E.detail)==null?void 0:L.focusReason)==="pointer"&&E.preventDefault()}e.lockScroll&&ro(m);function pe(){e.closeOnPressEscape&&$()}return Z(()=>e.modelValue,E=>{E?(y.value=!1,d(),v.value=!0,i.value=e.zIndex?i.value++:t(),xe(()=>{n("open"),l.value&&(l.value.scrollTop=0)})):m.value&&g()}),Z(()=>e.fullscreen,E=>{l.value&&(E?(u=l.value.style.transform,l.value.style.transform=""):l.value.style.transform=u)}),de(()=>{e.modelValue&&(m.value=!0,v.value=!0,d())}),{afterEnter:B,afterLeave:S,beforeLeave:O,handleClose:$,onModalClick:N,close:g,doClose:D,onOpenAutoFocus:f,onCloseAutoFocus:k,onCloseRequested:pe,onFocusoutPrevented:P,titleId:c,bodyId:r,closed:y,style:T,overlayDialogStyle:A,rendered:v,visible:m,zIndex:i}},ko=["aria-label","aria-labelledby","aria-describedby"],_o=U({name:"ElDialog",inheritAttrs:!1}),wo=U({..._o,props:ho,emits:Co,setup(e,{expose:l}){const a=e,n=Ze();oe({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},R(()=>!!n.title)),oe({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},R(()=>!!a.customClass));const t=G("dialog"),u=_(),c=_(),r=_(),{visible:m,titleId:y,bodyId:v,style:i,overlayDialogStyle:s,rendered:p,zIndex:M,afterEnter:T,afterLeave:A,beforeLeave:B,handleClose:S,onModalClick:O,onOpenAutoFocus:d,onCloseAutoFocus:g,onCloseRequested:$,onFocusoutPrevented:N}=Eo(a,u);Ge(ce,{dialogRef:u,headerRef:c,bodyId:v,ns:t,rendered:p,style:i});const C=fe(O),D=R(()=>a.draggable&&!a.fullscreen);return l({visible:m,dialogContentRef:r}),(f,k)=>(b(),z(oo,{to:"body",disabled:!f.appendToBody},[I(Ne,{name:"dialog-fade",onAfterEnter:o(T),onAfterLeave:o(A),onBeforeLeave:o(B),persisted:""},{default:h(()=>[Je(I(o(fo),{"custom-mask-event":"",mask:f.modal,"overlay-class":f.modalClass,"z-index":o(M)},{default:h(()=>[Y("div",{role:"dialog","aria-modal":"true","aria-label":f.title||void 0,"aria-labelledby":f.title?void 0:o(y),"aria-describedby":o(v),class:F(`${o(t).namespace.value}-overlay-dialog`),style:ie(o(s)),onClick:k[0]||(k[0]=(...P)=>o(C).onClick&&o(C).onClick(...P)),onMousedown:k[1]||(k[1]=(...P)=>o(C).onMousedown&&o(C).onMousedown(...P)),onMouseup:k[2]||(k[2]=(...P)=>o(C).onMouseup&&o(C).onMouseup(...P))},[I(o(Pe),{loop:"",trapped:o(m),"focus-start-el":"container",onFocusAfterTrapped:o(d),onFocusAfterReleased:o(g),onFocusoutPrevented:o(N),onReleaseRequested:o($)},{default:h(()=>[o(p)?(b(),z(bo,Qe({key:0,ref_key:"dialogContentRef",ref:r},f.$attrs,{"custom-class":f.customClass,center:f.center,"align-center":f.alignCenter,"close-icon":f.closeIcon,draggable:o(D),fullscreen:f.fullscreen,"show-close":f.showClose,title:f.title,onClose:o(S)}),eo({header:h(()=>[f.$slots.title?w(f.$slots,"title",{key:1}):w(f.$slots,"header",{key:0,close:o(S),titleId:o(y),titleClass:o(t).e("title")})]),default:h(()=>[w(f.$slots,"default")]),_:2},[f.$slots.footer?{name:"footer",fn:h(()=>[w(f.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):j("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,ko)]),_:3},8,["mask","overlay-class","z-index"]),[[ze,o(m)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var Mo=re(wo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const So=we(Mo);function Io(e){if(typeof e!="object")return;l(e);function l(a){Object.keys(a).forEach(n=>{typeof a[n]=="object"?l(a[n]):a[n]=""})}}const Do={class:"user-modal"},Fo={class:"dialog-footer"},To=U({__name:"page-modal",props:{modalConfig:null},setup(e,{expose:l}){const a=e,n=a.modalConfig.pageName,t=to({});a.modalConfig.formItem.forEach(i=>{t[i.prop]=i.initValue??""});let u=_(!1);const c=Te();let r=_(!1);Le();function m(i){if(Io(t),i){console.log("修改模式"),r.value=!0,t.id=i.id;for(let p in t)t[p]=i[p];const s=a.modalConfig.formItem.find(p=>p.onlyAdd);s&&delete t[s.prop]}else"id"in t&&delete t.id,r.value=!1;u.value=!0}const y=_();function v(){if(Object.values(t).some(i=>typeof i=="object"&&Object.keys(i).length===0||!i))return Re.warning("请补全信息后在保存!");r.value?c.updatePageAction(n,t.id,t):c.addPageAction(n,t),u.value=!1}return l({openDialog:m}),(i,s)=>{const p=De,M=Ae,T=Be,A=Se,B=Ie,S=Me,O=So;return b(),V("div",Do,[I(O,{title:o(r)?"修改":"新建"+e.modalConfig.title,center:"",width:"30%",modelValue:o(u),"onUpdate:modelValue":s[1]||(s[1]=d=>K(u)?u.value=d:u=d)},{footer:h(()=>[Y("span",Fo,[I(S,{type:"primary",size:"large",onClick:v},{default:h(()=>[le(" 确定 ")]),_:1}),I(S,{size:"large",onClick:s[0]||(s[0]=d=>K(u)?u.value=!1:u=!1)},{default:h(()=>[le("取消")]),_:1})])]),default:h(()=>[I(B,{model:t,"label-width":"80",size:"large",ref_key:"addFormRef",ref:y},{default:h(()=>[(b(!0),V(X,null,se(e.modalConfig.formItem,d=>(b(),V(X,{key:d.prop},[!o(r)||o(r)&&!d.onlyAdd?(b(),z(A,{key:0,label:d.label,prop:d.prop},{default:h(()=>[d.type==="custom"?w(i.$slots,d.prop,{key:0,item:d,formData:t},void 0,!0):d.type==="input"?(b(),z(p,{key:1,modelValue:t[d.prop],"onUpdate:modelValue":g=>t[d.prop]=g,modelModifiers:{lazy:!0},placeholder:d.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):d.type==="select"?(b(),z(T,{key:2,modelValue:t[d.prop],"onUpdate:modelValue":g=>t[d.prop]=g,style:{width:"100%"},placeholder:d.placeholder},{default:h(()=>[(b(!0),V(X,null,se(d.options,g=>(b(),z(M,{label:g.name,value:g.id},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):j("",!0)]),_:2},1032,["label","prop"])):j("",!0)],64))),128))]),_:3},8,["model"])]),_:3},8,["title","modelValue"])])}}});const Xo=lo(To,[["__scopeId","data-v-9711db1e"]]);function qo(e){const l=_();function a(){var t;e&&e(),(t=l.value)==null||t.openDialog(void 0)}function n(t){var u;e&&e(t),(u=l.value)==null||u.openDialog(t)}return{modalRef:l,handleAddEvent:a,handleUpdateEvent:n}}export{Xo as p,qo as u};
